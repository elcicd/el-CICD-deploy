<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>el-CICD Chart Reference Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>el-CICD Chart Reference Documentation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a>
<ul class="sectlevel2">
<li><a href="#_issues_with_helm_templates">1.1. Issues with Helm templates</a></li>
<li><a href="#_a_better_way_to_create_templates_in_helm">1.2. A better way to create templates in Helm</a></li>
</ul>
</li>
<li><a href="#_helm_repository_contents_and_usage">2. Helm Repository contents and usage</a></li>
<li><a href="#_deployment_definitions">3. Deployment definitions</a>
<ul class="sectlevel2">
<li><a href="#_basic_structure">3.1. Basic structure</a></li>
<li><a href="#_deployment_profiles">3.2. Deployment Profiles</a></li>
<li><a href="#_templates">3.3. Templates</a>
<ul class="sectlevel3">
<li><a href="#_types_of_templates">3.3.1. Types of templates</a></li>
<li><a href="#_helper_attributes">3.3.2. Helper attributes</a></li>
<li><a href="#_built_in_templates">3.3.3. Built-in templates</a></li>
<li><a href="#_free_form_templates">3.3.4. Free Form Templates</a></li>
</ul>
</li>
<li><a href="#_variables">3.4. Variables</a>
<ul class="sectlevel3">
<li><a href="#_defining">3.4.1. Defining</a></li>
<li><a href="#_referencing">3.4.2. Referencing</a></li>
<li><a href="#_built_in_variables">3.4.3. Built-in variables</a></li>
<li><a href="#_scoping">3.4.4. Scoping</a></li>
<li><a href="#_overriding">3.4.5. Overriding</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_rendering_process_overview">4. Rendering Process Overview</a></li>
<li><a href="#_specialized_utilities">5. Specialized Utilities</a>
<ul class="sectlevel2">
<li><a href="#_projectedvolumes_by_labels">5.1. projectedVolumes by labels</a></li>
<li><a href="#_copyresources">5.2. copyResources</a></li>
</ul>
</li>
<li><a href="#_debugging_utilities">6. Debugging utilities</a></li>
<li><a href="#_unconventional_use_cases">7. Unconventional use-cases</a>
<ul class="sectlevel2">
<li><a href="#_third_party_helm_charts">7.1. Third-party Helm charts</a></li>
<li><a href="#_kustomize">7.2. Kustomize</a></li>
</ul>
</li>
<li><a href="#_el_cicd_chart_reference">8. el-CICD Chart Reference</a>
<ul class="sectlevel2">
<li><a href="#_glossary">8.1. Glossary</a></li>
<li><a href="#_keywords">8.2. Keywords</a></li>
<li><a href="#_built_in_variables_2">8.3. Built-in Variables</a></li>
<li><a href="#_built_in_defaults">8.4. Built-in Defaults</a></li>
<li><a href="#_default_template_helper_attributes">8.5. Default Template Helper Attributes</a></li>
<li><a href="#_built_in_templates_2">8.6. Built-in Templates</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<strong>WORK IN PROGRESS</strong>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Helm is an excellent package management tool for deploying to Kubernetes, but it falls short when it comes to defining Kubernetes manifests through its templates.  Creating templates in Helm can be difficult to learn and master, has no support for Kubernetes resources, and it provides no support and is a poor tool for configuration management.</p>
</div>
<div class="sect2">
<h3 id="_issues_with_helm_templates">1.1. Issues with Helm templates</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Verbose</dt>
<dd>
<p>Helm/Go templates and associated values files are verbose, and assume a good understanding of the Kubernetes resources required when creating templates.  Multiple copies of the same resource type with varying structural content can require multiple copies of the same, verbose boilerplate, because reuse of YAML is not directly supported, either.</p>
</dd>
<dt class="hdlist1">Obtuse</dt>
<dd>
<p>Helm/Go Template syntax and the supporting Sprig library is not very user friendly, which can be a steep learning curve even for experienced developers.</p>
</dd>
<dt class="hdlist1">Brittle</dt>
<dd>
<p>Configuration management isn&#8217;t supported by Helm.  If structural changes are needed depending on the deployment context, charts can require significant rework to support each environment and/or configuration.</p>
</dd>
<dt class="hdlist1">It&#8217;s code</dt>
<dd>
<p>Helm templates are code.  This means Helm charts need to be tested as if they are software, and any changes to the templates in chart also require testing.  This testing is separate from whatever they are meant to deploy.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_a_better_way_to_create_templates_in_helm">1.2. A better way to create templates in Helm</h3>
<div class="paragraph">
<p>el-CICD Chart is a 100% compatible Helm chart that does away with the need for Go templates and replaces it with a much simpler and&#8201;&#8212;&#8201;in some cases&#8201;&#8212;&#8201;more flexible alternative for defining deployments to Kubernetes.  No other tool is required other than Helm, and el-CICD Chart only uses strict YAML for defining it&#8217;s deployment definitions.  The goal is to make sure there is no need to ever define a Helm/Go template again, and turn Helm into an effective YAML templating tool.</p>
</div>
<div class="paragraph">
<p>With el-CICD Chart values.yaml files have the following features:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Variables</dt>
<dd>
<p>Define el-CICD Chart variables, which can hold any valid YAML type.</p>
</dd>
<dt class="hdlist1">YAML templates</dt>
<dd>
<p>Create templates for any arbitrary YAML.</p>
</dd>
<dt class="hdlist1">Leverage built-in Kubernetes templates</dt>
<dd>
<p>Use pre-defined templates for many Kubernetes resources to further reduce the amount of boilerplate needed.</p>
</dd>
<dt class="hdlist1">Deployment profiles</dt>
<dd>
<p>Define <em>deployment profiles</em>, which allow multiple definitions of the same resources to be quickly defined in the same values.yaml file.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Adding these easy to use features to Helm&#8217;s values.yaml files significantly reduces the amount of boilerplate necessary to define Kubernetes deployments, as well as significantly reducing the learning curve needed to write them.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_helm_repository_contents_and_usage">2. Helm Repository contents and usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>el-CICD Chart as a project is made up of two charts, a <a href="https://helm.sh/docs/topics/library_charts/">Helm library chart</a> and an application chart:</p>
</div>
<div class="ulist">
<div class="title">Provided elcicd-charts with usage example</div>
<ul>
<li>
<p><strong>elcicd-lib</strong>: library chart</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre># Chart.yaml
dependencies:
- name: elcicd-lib
  version: 0.1.0
  repository: https://elcicd.github.io/el-CICD-deploy/charts/
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
<li>
<p><strong>elcicd-chart</strong>: application chart</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>$ helm repo add elcicd-charts https://elcicd.github.io/el-CICD-deploy/charts/
$ helm repo update
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because library charts cannot render anything by definition, the application chart is provided as a convenience chart that merely references the library chart as a dependency so that end users aren&#8217;t required to create their own charts.</p>
</div>
<div class="paragraph">
<p>GitHub pages is the current hosting platform for the charts.  The charts is also provided from GitHub&#8217;s OCI registry, but Helm must be authenticated with GitHub before attempting to use this method:</p>
</div>
<div class="paragraph">
<p><code>helm registry login --username ${USERNAME} oci://ghcr.io/elcicd</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_definitions">3. Deployment definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In el-CICD Chart, a collection of one or more <a href="https://helm.sh/docs/chart_template_guide/values_files/">Helm values.yaml files</a> defining a deployment will be referred to as a <strong><em>deployment definition</em></strong>.  These are the only files required to be written by the end user for deploying to Kubernetes when used in conjunction with Helm and el-CICD Chart.  It was a fundamental requirement when designing el-CICD Chart that it remain 100% compatible with Helm, and only requiring values.yaml files for use was how the requirement was met.</p>
</div>
<div class="paragraph">
<p>A deployment definition consists of el-CICD Chart templates for defining what is rendered through Helm, variables for defining any reusable data the templates need, and deployment profiles to support different configurations among the same templates.  el-CICD Chart adds built-in Kubernetes resource definitions with reasonable default values in order to further reduce boilerplate.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the remainder of this document, "templates" will refer only to el-CICD Chart templates, and <strong>NOT</strong> Helm templates.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_basic_structure">3.1. Basic structure</h3>
<div class="paragraph">
<p>The basic structure of an el-CICD Chart deployment definition is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>elCicdDefs(-<em>&lt;unique identifier 1&gt;</em>)(-<em>&lt;unique identifier 2&gt;</em>): <i class="conum" data-value="1"></i><b>(1)</b>
  &lt;SOME_VARIABLE_NAME&gt;: &lt;some-value&gt;
  ...

elCicdTemplates(-<em>&lt;unique identifier&gt;</em>): <i class="conum" data-value="2"></i><b>(2)</b>
- template(Name): &lt;built-in-template-name&gt;
  ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>elCicdDefs</code> or <code>elCicdDefs-*</code> are maps of variables and their values.
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Variables can be any valid YAML string.</p>
</li>
<li>
<p>Variable values can be any valid YAML type.</p>
</li>
<li>
<p>Variables can incorporate other variable references within them.</p>
</li>
<li>
<p>Can have optional unique identifiers defined after the <code>elCicdDefs-</code> prefix.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Refers to an object name and/or a deployment profile.</p>
</li>
<li>
<p>Only one of each is allowed.</p>
</li>
<li>
<p>Each must follow their naming requirements or they will be ignored.</p>
</li>
</ol>
</div>
</li>
</ol>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>elCicdTemplates</code> or <code>elCicdTemplates-*</code> are lists of el-CICD Chart templates.
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Templates can be either built-in el-CICD Chart templates referenced by name (templateName), or are expressed as the complete YAML to be rendered (template).</p>
</li>
<li>
<p>Variables can be referenced within templates.</p>
</li>
<li>
<p>Can have optional unique identifier defined after the <code>elCicdTemplates-</code> prefix.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Ensures each list of templates is not overwritten when Helm merges the values.yaml files.  They have no other meaning.</p>
</li>
<li>
<p>All <code>elCicdTemplates-*</code> lists will be concatenated to <code>elCicdTemplates</code> before processing.</p>
</li>
</ol>
</div>
</li>
</ol>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deployment_profiles">3.2. Deployment Profiles</h3>
<div class="paragraph">
<p><strong><em>Deployment profiles</em></strong> are the primary mechanism by which el-CICD Chart supports configuration management within a deployment definition.</p>
</div>
<div class="paragraph">
<p>Deployment profiles are generally defined on the command line in a list using the <code>elCicdProfiles</code> identifier:</p>
</div>
<div class="paragraph">
<p><code>helm upgrade --install --set elCicdProfiles='{&lt;PROFILE_1&gt;,&#8230;&#8203;,&lt;PROFILE_N&gt;}' &#8230;&#8203;</code></p>
</div>
<div class="paragraph">
<p>Profiles must start and end with an upper case alphanumeric character, and may contain any number of upper case alphanumeric characters delimited by either a single <code>_</code> or <code>.</code>.  The <a href="https://pkg.go.dev/regexp/syntax">regular expression</a> for a profile is:</p>
</div>
<div class="paragraph">
<p><code><span class="A-Z0-9">(?:[._][A-Z0-9]</span>)*</code></p>
</div>
<div class="paragraph">
<p>Profile naming standards were defined so that they could never be confused with a <code>objName</code>.</p>
</div>
<div class="paragraph">
<p>A profile is said to be <strong><em>active</em></strong> during the rendering of a deployment definition if included in the <code>elCicdProfiles</code> list.</p>
</div>
<div class="paragraph">
<p>Within a deployment definition, profiles are defined as either a discriminator for a map of <a href="#_variables">variables</a> or as condition for <a href="#_template_filtering">filtering templates</a>.  Which deployment profiles are active at rendering will determine which values are ultimately assigned to variables and whether a template is rendered or not.  This is how a single deployment definition can easily hold multiple different configurations.</p>
</div>
<div class="paragraph">
<p>The default deployment profile is an empty list; i.e. no active profiles.  If more than one profile is active at a time, precedence is defined as least to greatest in the order of the list per Helm convention.</p>
</div>
</div>
<div class="sect2">
<h3 id="_templates">3.3. Templates</h3>
<div class="paragraph">
<p>el-CICD Chart templates are defined in one or more lists starting with <code>elCicdTemplates</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>elCicdTemplates(-<em>&lt;unique identifier&gt;</em>): <i class="conum" data-value="1"></i><b>(1)</b>
- templateName: &lt;built-in-template-name&gt;  <i class="conum" data-value="2"></i><b>(2)</b>
  ...
- template: <i class="conum" data-value="3"></i><b>(3)</b>
    &lt;full-yaml-definition&gt;
  ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>List of el-CICD Chart templates.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>el-CICD Chart template using a built-in helper template.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>el-CICD Chart template defined by its full YAML definition.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to support multiple values.yaml files for flexibility and modularity when rendering deployment definitions with Helm, multiple <code>elCicdTemplates</code> lists may be defined using the optional unique identifier suffixes.  The order the lists and templates is irrelevant.  All <code>elCicdTemplates</code> lists will be concatenated before processing.  Each list name should be unique per deployment definitions, or the Helm rules for merging values.yaml will overwrite matching lists.  The text after <code>elCicdTemplates-</code> can be any valid YAML string.</p>
</div>
<div class="listingblock">
<div class="title">Example deployment definition with three <code>elCicdTemplates</code> lists</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: &lt;built-in-template-name&gt;
  ...

elCicdTemplates-my-secondList:
- templateName: &lt;built-in-template-name&gt;
  ...

elCicdTemplates-WITH_YAML:
- template:
    &lt;full-yaml-definition&gt;
  ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_types_of_templates">3.3.1. Types of templates</h4>
<div class="paragraph">
<p>el-CICD Chart supports two types of templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Built-in templates</strong>: Predefined templates within el-CICD Chart.</p>
<div class="ulist">
<ul>
<li>
<p>Includes many predefined defaults and helper attributes to make rendering resources simpler and less verbose.</p>
</li>
<li>
<p>Requested with the <a href="#_built_in_templates"><code>templateName</code></a> key to use a single built-in or <a href="#_compound_built_in_templates"><code>templateNames</code></a> to use more than.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Free form templates</strong>: Templates of plain YAML that define all or most of resource to be rendered.</p>
<div class="paragraph">
<p>Free form templates use the <code>template</code> key to define a full YAML template.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_helper_attributes">3.3.2. Helper attributes</h4>
<div class="paragraph">
<p>All el-CICD templates, whether YAML or helper, have a number of helper attributes.  Helper attributes are any attributes not under the <code>template</code> key.  The list and their function is as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><strong>rawYaml</strong></code>: Only applies to free form templates.  If <code>true</code>, el-CICD Chart will not attempt to render the required Kubernetes <code>metadata</code> map.</p>
</li>
<li>
<p><code><strong>objName</strong></code>: Name of the resource to be rendered.  For Kubernetes compatible resources, this corresponds directly to <code>metadata.name</code>.</p>
</li>
<li>
<p><code><strong>namespace</strong></code>: Kubernetes namespace to deploy the resource.  Directly corresponds to <code>metadata.namespace</code>.</p>
</li>
<li>
<p><code><strong>labels</strong></code>: Renders a map of labels to <code>metadata.labels</code>.</p>
</li>
<li>
<p><code><strong>annotations</strong></code>: Renders a map of labels to <code>metadata.annotations</code>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_template_filtering">3.3.2.1. Template filtering</h5>
<div class="paragraph">
<p><strong><em>Filters</em></strong> are special types of helper attributes the determine whether a template is rendered or not.  Each is a list of one or more profiles.  The act of defining an element in any of the lists below is one way in which profiles are defined in deployment definitions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><strong>mustHaveAnyProfile</strong></code>: if any profile in this list is active, render the template.</p>
</li>
<li>
<p><code><strong>mustHaveEveryProfile</strong></code>: if every profile in this list is active at the same time, render the template.</p>
</li>
<li>
<p><code><strong>mustNotHaveAnyProfile</strong></code>: if any profile in this list is active, do <strong>NOT</strong> render the template.</p>
</li>
<li>
<p><code><strong>mustNotHaveEveryProfile</strong></code>: if every profile in this list is active at the same time, do <strong>NOT</strong> render the template.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of the above may be used in combination with each other, and their order of precedence is not defined.</p>
</div>
<div class="listingblock">
<div class="title">Example of template filtering</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: &lt;built-in-template-name&gt;
  objName: obj-1
  mustHaveAnyProfile: [PROFILE_1, PROFILE_2] <i class="conum" data-value="1"></i><b>(1)</b>
  ...

elCicdTemplates-with-yaml:
- mustHaveEveryProfile: [PROFILE_1, PROFILE_2] <i class="conum" data-value="2"></i><b>(2)</b>
  objName: obj-2
  template:
    &lt;full-yaml-definition&gt;
  ...

elCicdTemplates-second-list:
- templateName: &lt;built-in-template-name&gt;
  objName: obj-3
  mustNotHaveAnyProfile: [PROFILE_1, PROFILE_2] <i class="conum" data-value="3"></i><b>(3)</b>
  ...

elCicdTemplates-with-yaml:
- mustNotHaveEveryProfile: [PROFILE_1, PROFILE_2, PROFILE_3] <i class="conum" data-value="4"></i><b>(4)</b>
  objName: obj-4
  template:
    &lt;full-yaml-definition&gt;
  ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Given <code>elCicdProfiles='{PROFILE_1,PROFILE_3}'</code>; i.e. <code>PROFILE_1</code> and <code>PROFILE_3</code> are active:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>mustHaveAnyProfile</code> requires either PROFILE_1 or PROFILE_3 to be active, so <code>obj-1</code> <strong>IS</strong> rendered.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>mustHaveEveryProfile</code> requires both PROFILE_1 and PROFILE_2 to be active, so <code>obj-2</code> is <strong>NOT</strong> rendered.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>mustNotHaveAnyProfile</code> requires neither PROFILE_1 or PROFILE_2 to be active, , so <code>obj-3</code> is <strong>NOT</strong> rendered.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>mustNotHaveEveryProfile</code> requires PROFILE_1, PROFILE_2, and PROFILE_3 to not all be active at the same time, so <code>obj-4</code> <strong>IS</strong> rendered.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_matrices">3.3.2.2. Matrices</h5>
<div class="paragraph">
<p><strong><em>Matrices</em></strong> are a special kind of helper attribute.  Matrices are lists of strings, and el-CICD Chart will generate a <em>copy of the template</em> for each element in the matrix.</p>
</div>
<div class="paragraph">
<p>el-CICD Chart currently only supports two matrix keys:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>objNames</code>: Sets the <code>objName</code> helper attribute to match the element for each copy.</p>
</li>
<li>
<p><code>namespaces</code>: Set the <code>namespace</code> helper attribute to match the element for each copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When using matrices, the <code>objName</code> and <code>namespace</code> attributes can used to define how the final value will be rendered with the following patterns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$&lt;&gt;</code>: Inserts the literal value from the matrix.</p>
</li>
<li>
<p><code>$&lt;#&gt;</code>: Inserts the index of the value in the matrix list.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example use of <code>objNames</code> and <code>namespaces</code> matrices</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: &lt;built-in-template-name&gt;
  objNames: [foo, bar]  <i class="conum" data-value="1"></i><b>(1)</b>
  namespaces: [zip, zap] <i class="conum" data-value="2"></i><b>(2)</b>
  objName: $&lt;&gt;-static-text-$&lt;#&gt; <i class="conum" data-value="3"></i><b>(3)</b>
  namespace: $&lt;&gt;-some-text-$&lt;#&gt; <i class="conum" data-value="3"></i><b>(3)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Will generate two copies of this template for rendering; this template will then be ignored.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Will generate two copies of the template, one for each namespace.
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When using the <code>namespaces</code> matrix, you must explicitly list the release namespace, <code>$&lt;HELM_RELEASE_NAMESPACE&gt;</code>, in order to deploy a copy there.
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Pattern to generate final name and namespace; e.g. &lt;objNames element&gt;-static-text-&lt;index of element&gt;</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above example template results in the following output:</p>
</div>
<div class="listingblock">
<div class="title">Example of templates generated from <code>objNames</code> and <code>namespaces</code> matrices</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: &lt;built-in-template-name&gt;
  objName: foo-static-text-1
  namespace: zip-some-text-1

- templateName: &lt;built-in-template-name&gt;
  objName: bar-static-text-2
  namespace: zip-some-text-1

- templateName: &lt;built-in-template-name&gt;
  objName: foo-static-text-1
  namespace: zap-some-text-2

- templateName: &lt;built-in-template-name&gt;
  objName: bar-static-text-2
  namespace: zap-some-text-2
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_built_in_templates">3.3.3. Built-in templates</h4>
<div class="paragraph">
<p>el-CICD Chart defines a number of pre-defined templates in order to further reduce end-user boilerplate, and these are referred to as <strong><em>built-in templates</em></strong>.  By convention, the names of built-in templates reflect the Kubernetes object they are to render; e.g. <code>deployment</code> for a Deployment and <code>horizontalPodAutoscaler</code> for a HorizontalPodAutoscaler.  Built-in templates are requested via the <code>templateName</code> key.</p>
</div>
<div class="listingblock">
<div class="title">Example using the ConfigMap built-in template</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: configMap <i class="conum" data-value="1"></i><b>(1)</b>
  objName: my-configmap <i class="conum" data-value="2"></i><b>(2)</b>
  labels: <i class="conum" data-value="3"></i><b>(3)</b>
    my-label: my-app
  data: <i class="conum" data-value="4"></i><b>(4)</b>
    a-key: a-value
    b-key: b-value
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Built-in template to render.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Eventual name of the rendered object; i.e. <code>metadata.name</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Helper attribute rendered to <code>metadata.labels</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Helper attribute rendered to <code>configmap.data</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above example template results in the following output:</p>
</div>
<div class="listingblock">
<div class="title">Example ConfigMap rendered from built-in template</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>apiVersion: v1 <i class="conum" data-value="1"></i><b>(1)</b>
kind: ConfigMap <i class="conum" data-value="1"></i><b>(1)</b>
metadata: <i class="conum" data-value="1"></i><b>(1)</b>
  name: my-configmap  <i class="conum" data-value="2"></i><b>(2)</b>
  labels:
    my-label: my-app  <i class="conum" data-value="3"></i><b>(3)</b>
data:  <i class="conum" data-value="4"></i><b>(4)</b>
  a-key: a-value
  b-key: b-value
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ConfigMap <code>apiVersion</code>, <code>kind</code>, and <code>metadata</code> map for a Kubernetes object from the built-in <code>configMap</code> template.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>metadata.name</code> generated from <code>objName</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>metadata.labels</code> generated from <code>labels</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>data</code> map generated from <code>data</code> helper attribute.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some built-in templates only include helper attributes that reflect their normal attributes, such as the ConfigMap example above, and are small conveniences for reducing unnecessary boilerplate.  Some built-ins have a few extra helper attributes that significantly reduce the amount a boilerplate needed to define a complete object.  See the <a href="#_built_in_templates_2">Built-in Templates</a> section for a complete list of all built-ins and their helper attributes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current set of built-in templates focus almost exclusively on application deployments and supporting Kubernetes resources.  It is hoped that el-CICD Chart will be able to fully support all Kubernetes resources in the future, as well as some popular Custom Resource Definitions.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_compound_built_in_templates">3.3.3.1. Compound Built-in templates</h5>
<div class="paragraph">
<p>In order to further reduce excess boilerplate, el-CICD Chart allows defining <strong><em>compound built-in templates</em></strong>.  Compound built-in templates combine more than one built-in template definitions into a single definition with each individual built-in re-using any shared helper attributes.  Compound built-in templates are defined as a list of one more strings under the <code>templateNames</code> key.</p>
</div>
<div class="listingblock">
<div class="title">Example Deployment, Service, and Ingress as individual built-in templates</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: deployment <i class="conum" data-value="1"></i><b>(1)</b>
  objName: my-app
  image: &lt;some-image&gt;
  port: 8080 <i class="conum" data-value="2"></i><b>(2)</b>

- templateName: service <i class="conum" data-value="1"></i><b>(1)</b>
  objName: my-app
  port: 8081 <i class="conum" data-value="2"></i><b>(2)</b>
  targetPort: 8080 <i class="conum" data-value="3"></i><b>(3)</b>

- templateName: ingress <i class="conum" data-value="1"></i><b>(1)</b>
  objName: my-app
  host: example.com
  port: 8081 <i class="conum" data-value="2"></i><b>(2)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>templateName</code> of the <code>deployment</code>, <code>service</code>, and <code>ingress</code> built-in templates individually defined.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>port</code> is defined differently on the separate templates for illustrative purposes.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>targetPort</code> needs to match the <code>deployment</code> port.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example Deployment, Service, and Ingress as a single compound templates</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>elCicdTemplates:
- templateNames: [deployment, service, ingress] <i class="conum" data-value="1"></i><b>(1)</b>
  objName: my-app <i class="conum" data-value="2"></i><b>(2)</b>
  image: &lt;some-image&gt;
  host: example.com
  port: 8081 <i class="conum" data-value="3"></i><b>(3)</b>
  targetPort: 8080 <i class="conum" data-value="4"></i><b>(4)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>templateNames</code> defines this template as combining a deployment, service, and ingress.
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more concise compound templates, take advantage of the fact that YAML is a superset of JSON and use JSON-like list notation.
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>objName</code> is shared among all three resources.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>port</code> is shared between the <code>service</code> and the <code>ingress</code>.  If the <code>service&#8217;s</code> outward and inward facing <code>port&#8217;s</code> were the same, only the <code>port</code> attribute would need to be defined.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>targetPort</code> is also a helper attribute of <code>deployment</code> that has precedence over a <code>port</code> definition, making this compound template equivalent to individually defined templates in the previous example.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_default_values">3.3.3.2. Default Values</h5>
<div class="paragraph">
<p>Many built-in templates have reasonable default values defined in order to further reduce boilerplate; e.g. if the <code>port</code> and <code>targetPort</code> are the same and the default value (8080) is sufficient, and the release name is sufficient as a <code>metadata.name</code>:</p>
</div>
<div class="listingblock">
<div class="title">Deployment and Service as compound built-in templates</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre>elCicdTemplates:
- templateNames: [deployment, service]
  image: &lt;some-image&gt;
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above is the minimal amount that&#8217;s needed in a deployment definition for a simple deployment of an application to a Kubernetes cluster using el-CICD Chart.  Add the <code>ingress</code> built-in to the list and define the <code>host</code> helper attribute if the application is accessible from outside the cluster.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_free_form_templates">3.3.4. Free Form Templates</h4>
<div class="paragraph">
<p>If more complex template definitions are required, or a built-in template doesn&#8217;t exist for a resource, a <strong><em>free form template</em></strong> can be defined. Free form templates are just fully defined YAML definitions of resources.  While more verbose than using the simpler, built-in templates, Kubernetes is infinitely extensible with <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">Custom Resource Definitions</a> (CRD&#8217;s), and having free form templates means that no matter what CRD&#8217;s are introduced now or in the future, el-CICD Chart deployment definitions can adapt without requiring the user to resort to creating new Helm/Go templates.</p>
</div>
<div class="paragraph">
<p>For example, <a href="https://argo-cd.readthedocs.io/en/stable/">ArgoCD</a> is a popular GitOps solution for managing deployments to Kubernetes cluster, but el-CICD Chart currently has no built-in templates to support an ArgoCD <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications">Application</a>, but with free form templates this isn&#8217;t an issue:</p>
</div>
<div class="listingblock">
<div class="title">Defining an ArgoCD Application for my-app</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre>elCicdTemplates:
- template:
    apiVersion: argoproj.io/v1alpha1
    kind: Application
    metadata:
      name: my-application-name
      namespace: argocd
    spec:
      project: default
      source:
        repoURL: https://my-git-server.com/my-org/my-app.git
        targetRevision: HEAD
        path: my-app
      destination:
        server: https://kubernetes.default.svc
        namespace: my-app-namespace
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Built-in templates are a convenience, and not a necessity.  The advantage of free form templates are that they can still use all other features of el-CICD Chart, which means easier templating and configuration management.  Anywhere a built-in template is used a YAML template can be substituted, and vice versa if a built-in template exists for the object being rendered; however, if a <code>templateName</code> or <code>templateNames</code> are defined, <code>template</code> will be ignored.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variables">3.4. Variables</h3>
<div class="paragraph">
<p>In traditional Helm, <a href="https://helm.sh/docs/chart_template_guide/values_files/">Helm values.yaml files</a> are static YAML files that are fed to a chart consisting of
Helm/Go templates and processed to produce resource definitions for deployment to Kubernetes.  In order to simplify defining templates and move away from Helm/Go templates, defining variables in deployment definitions was implemented.</p>
</div>
<div class="sect3">
<h4 id="_defining">3.4.1. Defining</h4>
<div class="paragraph">
<p>Variables are defined in YAML maps named starting with <code>elCicdDefs</code> either at the root of a document or within a <a href="#_templates">template</a>.  Variables may contain any any valid YAML syntax and type.</p>
</div>
<div class="listingblock">
<div class="title">Example el-CICD variable definitions by type</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>elCicdDefs: <i class="conum" data-value="1"></i><b>(1)</b>
  STRING: string  <i class="conum" data-value="2"></i><b>(2)</b>

  MULTILINE_STRING: |- <i class="conum" data-value="3"></i><b>(3)</b>
    long
    multiline
    text

  BOOLEAN: true <i class="conum" data-value="4"></i><b>(4)</b>

  NUMBER: 10 <i class="conum" data-value="5"></i><b>(5)</b>

  MAP: <i class="conum" data-value="6"></i><b>(6)</b>
    foo: bar

  LIST: <i class="conum" data-value="7"></i><b>(7)</b>
  - foo
  - bar
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>elCicdDefs</code> map defines the default set of variables for a deployment definition.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A variable representing a string.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A variable representing a multiline string.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>A variable representing a boolean.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>A variable representing a number.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>A variable representing a map.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>A variable representing a list.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Variable names must are defined by strings of alphanumeric characters or <code>_</code> and optionally delimited by single dashes, <code>-</code>.  The <a href="https://pkg.go.dev/regexp/syntax">regular expression</a> for a variable name is</p>
</div>
<div class="paragraph">
<p><code><span class="\w">?(?:[-][\w]</span>?)*</code></p>
</div>
<div class="paragraph">
<p>By convention, variables are defined with UPPER_SNAKE_CASE, similar to scripting in shell, but this is not a requirement.</p>
</div>
<div class="listingblock">
<div class="title">Example valid and invalid variables</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>elCicdDefs:
  VALID_VAR: is-valid
  valid-VAR: is-valid
  1-valid-var: is-valid

  -invalid-var: dash-at-the-beginning
  INVALID_VAR-: dash-at-the-end
  INVALID--VAR: double-dashes-middle-of-definition
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Invalid variable definitions that are valid YAML are simply ignored.  It is not el-CICD Chart&#8217;s place to flag valid YAML, and it should be pretty easy to debug any issues by looking at the eventual output.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_referencing">3.4.2. Referencing</h4>
<div class="paragraph">
<p>Variables are referenced with the following syntax:</p>
</div>
<div class="paragraph">
<p><code>$&lt;&#8230;&#8203;&gt;</code></p>
</div>
<div class="paragraph">
<p>Escaping a variable performed with a backslash:</p>
</div>
<div class="paragraph">
<p><code>\$&lt;&#8230;&#8203;&gt;</code></p>
</div>
<div class="paragraph">
<p>This notation was chosen for two reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No scripting languages use it, making the templating of scripts in other languages within an deployment definition straightforward.</p>
</li>
<li>
<p>Variables and their references are valid YAML both as keys in maps and as values in strings, maps, and lists.  Helm requires that values.yaml files (and therefore el-CICD Chart deployment definitions) be valid YAML.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because of the way Helm works, <code>elCicdDefs</code> variable maps are read in completely with the rest of the deployment definition, and each final variable reference value is only determined during processing; therefore, variables do <strong>NOT</strong> have to be defined before being referenced.</p>
</div>
<div class="listingblock">
<div class="title">Example of variables referencing other variables</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre>elCicdDefs:
  OTHER_VARIABLE: $&lt;VARIABLE&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  VARIABLE: some-name <i class="conum" data-value="2"></i><b>(2)</b>

  $&lt;OTHER_VARIABLE&gt;: final-value <i class="conum" data-value="3"></i><b>(3)</b>

  ESCAPED_VARIABLE: \$&lt;LITERAL_VALUE&gt; <i class="conum" data-value="4"></i><b>(4)</b>

  FOO: foo
  BAR: bar
  $&lt;$&lt;FOO&gt;$&lt;BAR&gt;&gt;: dynamic-$&lt;FOO&gt;$&lt;BAR&gt;-value <i class="conum" data-value="5"></i><b>(5)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>OTHER_VARIABLE</code> references <code>VARIABLE</code> (defined  immediately afterwards), and therefore has the value <code>some-name</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>VARIABLE</code> has the value of <code>some-name</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>OTHER_VARIABLE</code> is referenced as the key to a variable; therefore, a variable is defined as <code>some-name</code> with the value <code>final-value</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>ESCAPED_VARIABLE</code> has the string value &#8220;$&lt;LITERAL_VALUE&gt;&#8221;, which is <strong>NOT</strong> a variable reference, because of the <code>\</code> in front of the <code>$</code> escaping it.  Note that the final value of <code>ESCAPED_VARIABLE</code> does <strong>NOT</strong> contain the backslash.  Backslashes are removed during processing.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>FOO</code> and <code>BAR</code> are dynamically used to define the variable <code>foobar</code>, with a value of <code>dynamic-foobar-value</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_built_in_variables">3.4.3. Built-in variables</h4>
<div class="paragraph">
<p>el-CICD Chart defines a number of built-in variables for use in templates, Helm and template.</p>
</div>
<div class="sect4">
<h5 id="_helm_built_in_variables">3.4.3.1. Helm built-in variables</h5>
<div class="paragraph">
<p>el-CICD Chart has a few built-in variables derived from <a href="https://helm.sh/docs/chart_template_guide/builtin_objects/">Helm&#8217;s built-in objects</a>.</p>
</div>
<div class="listingblock">
<div class="title">el-CICD Chart Helm built-in variable examples</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre>elCicdDefs:
  MY_RELEASE_NAME: $&lt;HELM_RELEASE_NAME&gt; <i class="conum" data-value="1"></i><b>(1)</b>
  MY_RELEASE_NAMESPACE: $&lt;HELM_RELEASE_NAMESPACE&gt; <i class="conum" data-value="2"></i><b>(2)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code><strong>HELM_RELEASE_NAME</strong></code> is equivalent to <code>.Release.Name</code>, the release name when deployed.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code><strong>HELM_RELEASE_NAMESPACE</strong></code> is equivalent to <code>.Release.Namespace</code>, the release namespace when deployed.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_template_built_in_variables">3.4.3.2. Template built-in variables</h5>
<div class="paragraph">
<p>Each template has it&#8217;s own set of built-in variables set when being processed for use in deployment definitions:</p>
</div>
<div class="listingblock">
<div class="title">el-CICD Chart template built-in variable examples</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre>elCicdDefs:
  MY_OBJ_NAME: $&lt;OBJ_NAME&gt; <i class="conum" data-value="1"></i><b>(1)</b>
  MY_BASE_OBJ_NAME: $&lt;BASE_OBJ_NAME&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  MY_NAME_SPACE: $&lt;NAME_SPACE&gt; <i class="conum" data-value="3"></i><b>(3)</b>
  MY_BASE_NAME_SPACE: $&lt;BASE_NAME_SPACE&gt; <i class="conum" data-value="4"></i><b>(4)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code><strong>OBJ_NAME</strong></code>: value of the <code>objName</code> helper attribute.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code><strong>BASE_OBJ_NAME</strong></code>: value of an element from the <code>objNames</code> <a href="#_matrices">matrix</a> that <code>objName</code> was derived from.  Will default to the value of <code>OBJ_NAME</code> if <code>objNames</code> is undefined.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code><strong>NAME_SPACE</strong></code>: namespace the resource will be deployed to.  Defaults to <code>HELM_RELEASE_NAMESPACE</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code><strong>BASE_NAME_SPACE</strong></code>: value of an element from the <code>namespaces</code> matrix.  Will default to the value of <code>NAME_SPACE</code> if <code>namespaces</code> is undefined.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scoping">3.4.4. Scoping</h4>
<div class="paragraph">
<p><code>elCicdDefs</code> map definitions have two different scopes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Deployment</strong></p>
<div class="paragraph">
<p>All <code>elCicdDefs</code> maps defined outside of templates; i.e. defined from the root of the deployment definition.  Covers every template in the deployment definition.</p>
</div>
</li>
<li>
<p><strong>Template</strong></p>
<div class="paragraph">
<p>All <code>elCicdDefs</code> maps defined under a specific template.</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of deployment and template <code>elCicdDefs</code> map definitions</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre>elCicdDefs: <i class="conum" data-value="1"></i><b>(1)</b>
  VAR: a-var

elCicdTemplates:
- templateName: &lt;template name&gt;
  objName: first-template
  elCicdDefs: <i class="conum" data-value="2"></i><b>(2)</b>
    INNER_VAR: an-inner-var
- templateName: &lt;template name&gt;
  objName: second-template
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>elCicdDefs</code> defined at the root of the deployment definition are said to have <strong><em>deployment scope </em></strong>.  <code>VAR</code> can be used by <code>first-template</code> and <code>second-template</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>INNER_VAR</code> is only available to the <code>first-template</code>, because its <code>elCicdDefs</code> map is defined directly under it.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overriding">3.4.5. Overriding</h4>
<div class="paragraph">
<p>Variables may be overridden in el-CICD Chart by defining more specific`elCicdDefs` maps.  The types of <code>elCicdDefs</code> maps are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Profile</strong></p>
<div class="paragraph">
<p><code>elCicdDefs-&lt;PROFILE_NAME&gt;</code> maps defined for a specific deployment profile.  Only one profile may be named.</p>
</div>
</li>
<li>
<p><strong>objName</strong></p>
<div class="paragraph">
<p><code>elCicdDefs-&lt;OBJ_NAME&gt;</code> maps defined for a specific <code>objName</code> or <code>BASE_OBJ_NAME</code>.  Only one <code>objName</code> may be named.</p>
</div>
</li>
<li>
<p><strong>Profile</strong> and <strong>objName</strong></p>
<div class="paragraph">
<p><code>elCicdDefs-&lt;PROFILE_NAME&gt;-&lt;OBJ_NAME&gt;</code> or <code>elCicdDefs-&lt;OBJ_NAME&gt;-&lt;PROFILE_NAME&gt;</code> maps defined for a specific deployment profile and <code>objName</code>.  Only one <code>objName</code> and one profile may be named.</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of different <code>elCicdDefs</code> map definitions</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre>elCicdDefs: <i class="conum" data-value="1"></i><b>(1)</b>
  VAR: a-var

elCicdDefs-PROFILE: <i class="conum" data-value="2"></i><b>(2)</b>
  VAR: a-var

elCicdDefs-obj-name: <i class="conum" data-value="3"></i><b>(3)</b>
  VAR: a-var

elCicdDefs-PROFILE-obj-name: <i class="conum" data-value="4"></i><b>(4)</b>
  VAR: a-var

elCicdDefs-obj-name-PROFILE: <i class="conum" data-value="4"></i><b>(4)</b>
  VAR: a-var
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Default <code>elCidDefs</code> map.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Profile specific <code>elCidDefs</code> map.  Only applies if <code>PROFILE</code> is active.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>objName</code>  specific <code>elCidDefs</code> map.  Only applies to resources where the <code>objName</code> or <code>BASE_OBJ_NAME</code> match.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Profile and <code>objName</code> specific <code>elCidDefs</code> maps.  Only applies when <code>PROFILE</code> is active and to resources where the <code>objName</code> or <code>BASE_OBJ_NAME</code> match.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Every type of <code>elCicdDefs</code> maps may be defined for the deployment or a specific template.</p>
</div>
<div class="sect4">
<h5 id="_order_of_precedence">3.4.5.1. Order of precedence</h5>
<div class="paragraph">
<p>Order of precedence determines which <code>elCicdDefs</code> map determines the ultimate value of a variable if it is defined in multiple variable maps.</p>
</div>
<div class="paragraph">
<p>From least to greatest:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><strong>elCicdDefs</strong></code>: default.</p>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;PROFILE&gt;</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>PROFILE</code> is an active profile.</p>
</li>
<li>
<p>Deployment profiles' precedence is from least to greatest in the <code>elCicdProfiles</code> list.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>**elCicdDefs-&lt;BASE_OBJ_NAME&gt;</code></p>
<div class="paragraph">
<p>An element from an <code>objNames</code> list.</p>
</div>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;objName&gt;</strong></code></p>
<div class="paragraph">
<p>The <code>objName</code> value of a template.</p>
</div>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;PROFILE&gt;-&lt;BASE_OBJ_NAME&gt;</strong></code></p>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;BASE_OBJ_NAME&gt;-&lt;PROFILE&gt;</strong></code></p>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;PROFILE&gt;-&lt;objName&gt;</strong></code></p>
</li>
<li>
<p><code><strong>elCicdDefs-&lt;objName&gt;-&lt;PROFILE&gt;</strong></code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All template specific <code>elCicdDefs</code> will have precedence over deployment <code>elCicdDefs</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example of precedence with <code>elCicdDefs</code> maps and active deployment profile <code>PROFILE</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre>elCicdProfiles: [PROFILE]

elCicdDefs:
  VAR: a-value

elCicdDefs-PROFILE:
  VAR: a-profile-value

elCicdDefs-obj-name:
  VAR: an-obj-name-value

elCicdTemplates:
- templateName: &lt;template name&gt;
  objName: obj-name  <i class="conum" data-value="1"></i><b>(1)</b>
  elCicdDefs:
    VAR: final-value

- templateName: &lt;template name&gt;
  objName: an-obj-name-value  <i class="conum" data-value="2"></i><b>(2)</b>

- templateName: &lt;template name&gt;
  objName: obj-name-3  <i class="conum" data-value="3"></i><b>(3)</b>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>VAR == final-value</code>, because the template <code>elCicdDefs</code> overrides all deployment <code>elCicdDefs</code> maps.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>VAR == an-obj-name-value</code>, because <code>elCicdDefs-&lt;objName&gt;</code> has precedence over <code>elCicdDefs-&lt;profile&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>VAR == a-profile-value</code>, because <code>elCicdDefs-&lt;profile&gt;</code> has precedence over <code>elCicdDefs</code>, and there&#8217;s no matching <code>elCicdDefs-&lt;objName&gt;</code> map.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To null a variable out, define it with an empty value in a higher precedence <code>elCicdDefs</code> map.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rendering_process_overview">4. Rendering Process Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A high level overview of how el-CICD Chart processes and renders deployment definitions.  How and when variables are realized is also explained.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Realize Dynamic <code>elCicdDefs-*</code> Names</strong></p>
<div class="paragraph">
<p><code>elCicdDefs</code> map names may be defined with variables; e.g. <code>elCicdDefs-$&lt;FOO&gt;</code>.  All of the deployment <code>elCicdDefs</code> map names are processed first.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>ONLY values defined in the default deployment <code>elCicdDefs</code> can be used to define deployment <code>elCicdDefs-*</code> maps.</strong>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Create Profile-based <code>elCicdDefs</code></strong></p>
<div class="paragraph">
<p>Collect final values <code>elCicdDefs</code> based on deployment profiles only; i.e. consider only <code>elCicdDefs-&lt;PROFILE&gt;</code> maps.</p>
</div>
</li>
<li>
<p><strong>Collect and Filter All Templates</strong></p>
<div class="paragraph">
<p><code>elCicdTemplate-*</code> lists are collected and concatenated to create an intermediate <code>elCicdTemplates</code> list.  <a href="#_template_filtering">Filter</a> this list based on the active profiles.</p>
</div>
</li>
<li>
<p><strong>Expand Matrixes:</strong></p>
<div class="paragraph">
<p><a href="#_matrices">Matrix</a> values and lists can be parameterized with variables; e.g. <code>namespaces: $&lt;NAMESPACE_LIST&gt;</code> or <code>objNames: [$&lt;FOO&gt;,$&lt;BAR&gt;]</code>.  Using the profiles-based <code>elCicdDefs</code> map, process the matrix variable references, and then generate all copies for any templates with matrices defined to create a final <code>elCicdTemplates</code> list.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Only values derived from profile-based deployment <code>elCicdDefs</code> map can be used as variables in matrices.</strong>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Process Templates</strong></p>
<div class="paragraph">
<p>For each template in the final template list:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Use the active profiles and the <code>objName</code> to derive the final deployment <code>elCicdDefs</code> for the template.</p>
</li>
<li>
<p>Using the final deployment <code>elCicdDefs</code> map as the starting point, process all template <code>elCicdDefs</code> to derive the final <code>elCicdDefs</code> map for the template.</p>
</li>
<li>
<p>Using the final <code>elCicdDefs</code> map for the template, replace ALL remaining variable references in the template.</p>
</li>
<li>
<p>If any escaped el-CICD Chart variable references exist, remove the backslash; e.g. <code>\$&lt;FOO&gt;</code> becomes <code>$&lt;FOO&gt;</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Render the Templates to YAML</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If <code>templateName</code> or <code>templateNames</code> are defined, process the named templates.</p>
</li>
<li>
<p>If <code>templateName</code> or <code>templateNames</code> are NOT defined, render the value of <code>template</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Output Final Metadata</strong></p>
<div class="paragraph">
<p>In YAML comments, output:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The list of active profiles</p>
</li>
<li>
<p>A list of each template skipped due to filtering.</p>
</li>
<li>
<p>A list of each template rendered.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This concludes the el-CICD Chart rendering process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specialized_utilities">5. Specialized Utilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>el-CICD Chart has a some extra functionality built in to make creating deployment definitions easier, as well as enabling new means of defining deployment definitions for more dynamic deployments.</p>
</div>
<div class="sect2">
<h3 id="_projectedvolumes_by_labels">5.1. projectedVolumes by labels</h3>
<div class="paragraph">
<p>While Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/pods/">Pods</a> support mounting ConfigMaps and Secrets as volumes, there are some limitations.  To address these limitations, Kubernetes added the concept of <a href="https://kubernetes.io/docs/concepts/storage/projected-volumes/">projected volumes</a>.  The advantage of Projected volumes is that several different resources&#8201;&#8212;&#8201;and not just ConfigMaps and Secrets&#8201;&#8212;&#8201;could be mounted to a single directly in a container.</p>
</div>
<div class="paragraph">
<p>Unfortunately, like most tools associated with deploying to Kubernetes, the manifests for mounting Secrets and ConfigMaps, whether individually or in projected volumes, had to be statically declared; i.e. the deployment manifests had to know all the resources to be mounted as volumes beforehand.</p>
</div>
<div class="paragraph">
<p>In order to enable more dynamic behavior, el-CICD Chart implemented functionality that would mount a collection of ConfigMaps and/or Secrets into a projected volume by their labels.  Lists of labels can be provided, and the namespace of the Pod will be scanned for matching resources, all of which will be mounted into the container.  The values of the labels are not relevant to this functionality.  Only whether the label exists on the resource.</p>
</div>
<h4 id="_example_using_projectedvolumes_configmapsbylabels_for_job" class="discrete">Example using <code>projectedVolumes.configMapsByLabels</code> for Job</h4>
<div class="listingblock">
<div class="title">ConfigMaps are deployed first:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: configMap
  objName: cm-1
  labels:
    foo: "doesn't matter"
  data:
    cm-1.txt: some text

- templateName: configMap
  objName: cm-2
  labels:
    foo: "doesn't matter"
  data:
    cm-2.txt: some text
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The ConfigMaps must be deployed <strong>before</strong> using <code>projectedVolumes.configMapsByLabels</code>.  Helm will only find resources already deployed in the sane namespace.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Deploy Job that is using <code>projectedVolumes.configMapsByLabels</code>:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>elCicdTemplates:
- templateName: job
  objName: cm-by-labels-example
  image: &lt;some-image&gt;:latest
  projectedVolumes:
  - name: foo-label-volume
    mountPath: /mnt/testing
    configMapsByLabels:
      foo: {}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Partial pseudo-manifest generated by el-CICD Chart from deployment definition above:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="code"><pre>apiVersion: batch/v1
kind: Job
metadata:
  name: cm-by-labels-example
spec:
  template:
    metadata:
      labels:
      name: cm-by-labels-example
      namespace: elcicd-chart-demo
    spec:
      containers:
      - name: cm-by-labels-example
        image: &lt;some-image&gt;:latest
        ...
        volumeMounts:
        - mountPath: /mnt/testing
          name: foo-label-volume
          readOnly: false
        ...
      volumes:
      - name: foo-label-volume
        projected:
          sources:
          - configMap:
              name: cm-1
          - configMap:
              name: cm-2
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_copyresources">5.2. copyResources</h3>
<div class="paragraph">
<p>Sometimes it makes sense to copy resources from one namespace to another.  From a design perspective, this is analogous to the prototype pattern.</p>
</div>
<div class="paragraph">
<p>Example use cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A pull secret used by many or all applications on the cluster can be deployed in a master namespace.  It&#8217;s easier to copy the ConfigMap from the master namespace to the application namespaces than have every application manage its own copy directly.</p>
</li>
<li>
<p>Similarly, a common set of configuration values is defined in a ConfigMap and deployed in a master namespace, and they are used by many or all applications on the cluster.  It&#8217;s easier to copy the ConfigMap from the master namespace to the application namespaces as needed than have every application manage its own copy directly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>el-CICD Chart has implemented a utility helper template that will copy a resource from one namespace to any other.</p>
</div>
<div class="listingblock">
<div class="title"><code>copyResource</code> built-in template structure</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre>- templateName: copyResource
  objName: copy-example
  kind: &lt;<em>some resource kind</em>&gt;
  fromNamespace: &lt;<em>source namespace</em>&gt;
  toNamespace: &lt;<em>target namespace</em>&gt;
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In conjunction with the <code>objNames</code> namespace, a single template declaration can copy a resource as many times as it needs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debugging_utilities">6. Debugging utilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>el-CICD Chart supports two utilities to help with debugging deployment definitions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">outputValuesYaml</dt>
<dd>
<p>If true, output all merged values.yaml files as YAML and exit.  No el-CICD Chart processing takes place.  Templates will <strong>NOT</strong> be rendered to YAML.  Useful for inspecting how Helm merges multiple deployment definition files.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>helm template --set outputValuesYaml=true &#8230;&#8203;</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">valuesYamlToStdOut</dt>
<dd>
<p>If true, output all values of a processed el-CICD Chart deployment definition as YAML and exit.  Includes all values belonging <code>elCicdTemplates</code> and <code>elCicdDefs</code> maps and the <code>elCicdProfiles</code> list.  Templates will <strong>NOT</strong> be rendered to YAML.  Useful for inspecting the results of a processed deployment definition before the templates are rendered.</p>
<div class="paragraph">
<p><code>helm template --set valuesYamlToStdOut=true &#8230;&#8203;</code></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unconventional_use_cases">7. Unconventional use-cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below are a just a few unconventional ways el-CICD Chart can be used.</p>
</div>
<div class="sect2">
<h3 id="_third_party_helm_charts">7.1. Third-party Helm charts</h3>
<div class="paragraph">
<p>There are many applications that already Helm charts created for them, and rewriting them to use el-CICD Chart directly might not be possible or useful for a myriad of reasons.  So how can el-CICD Chart still be leveraged for configuration management?  The answer is to define a deployment definition that results in a values.yaml file and pipe it or post-render with a second Helm call to the other chart.</p>
</div>
<div class="listingblock">
<div class="title">Example deployment definition for third-party Helm chart</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre>elCicdDefs:
  SOME_3RD_PARTY_VALUES_YAML_VAR: a-value

elCicdDefs-SOME_PROFILE:
  SOME_3RD_PARTY_VALUES_YAML_VAR: b-value

elCicdTemplates:
- rawYaml: true <i class="conum" data-value="1"></i><b>(1)</b>
  objName: values-yaml-comp-1 <i class="conum" data-value="2"></i><b>(2)</b>
  template: <i class="conum" data-value="3"></i><b>(3)</b>
    ...
- rawYaml: true <i class="conum" data-value="1"></i><b>(1)</b>
  objName: values-yaml-comp-n <i class="conum" data-value="2"></i><b>(2)</b>
  template: <i class="conum" data-value="3"></i><b>(3)</b>
    ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set <code>rawYaml</code> to true so el-CICD only outputs the processed YAML template exactly as written.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Any number of values files can be defined in a single deployment definition.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create a YAML template for the values.yaml files of the third-party chart.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example deploy-to-helm.sh</div>
<div class="content">
<pre>#!/bin/bash
cat - &gt; third-party-chart-values.yaml

helm upgrade --install -f third-party-chart-values.yaml third-party-release elcicd-charts/elcicd-chart</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example using el-CICD Chart with a Helm <code>--post-renderer</code> to deploy third-party chart</div>
<div class="content">
<pre>helm template -f deployment-def.yaml --post-renderer deploy-to-helm.sh</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example  el-CICD Chart with a pipe to deploy third-party chart</div>
<div class="content">
<pre>helm template -f deployment-def.yaml gen-values-file elcicd-charts/elcicd-chart | \
  helm upgrade --install -f - third-party-release elcicd-charts/elcicd-chart</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kustomize">7.2. Kustomize</h3>
<div class="paragraph">
<p>Helm is not good at some things that el-CICD Chart cannot fix on its own; e.g. labeling and/or annotating a random collection of Kubernetes resources.  Or patching resources, for that matter.  <a href="https://kustomize.io/">Kustomize</a> fills the gap in functionality that Helm or el-CICD Chart templates can&#8217;t address.</p>
</div>
<div class="paragraph">
<p><code>kustomization.yaml</code> files, though, are notoriously static in nature by design.  Using el-CICD Chart to create a template of a Kustomization in order to make the files dynamic (e.g. for a CICD system) is trivial.</p>
</div>
<div class="listingblock">
<div class="title">Example deployment definition kustomization-values.yaml for a dynamic kustomization.yaml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre>elCicdDefs: {}  <i class="conum" data-value="1"></i><b>(1)</b>

elCicdTemplates:
- templateName: kustomization <i class="conum" data-value="2"></i><b>(2)</b>
  fields:  <i class="conum" data-value="3"></i><b>(3)</b>
    resources:
    - $&lt;RESOURCES_FILE&gt;

    commonLabels:
      elcicd.io/teamid: $&lt;TEAM_ID&gt;
      elcicd.io/projectid: $&lt;PROJECT_ID&gt;
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>elCicdDefs</code> is only defined here to note that all variables in this example are expected to be passed in via the command line.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>el-CICD Chart has a <code>kustomization</code> built-in template so that the normal headers don&#8217;t need to be defined.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create the Kustomization definition, and parameterize it where necessary.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example <code>--post-renderer</code> kustomize.sh</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="YAML"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre>#!/bin/bash
cat &lt;&amp;0 &gt; manifests.yaml

helm template -f kustomization-values.yaml \
  --set-string elCicdDefs.RESOURCES_FILE=manifests.yaml \
  --set-string elCicdDefs.TEAM_ID=my-team \
  --set-string elCicdDefs.PROJECT_ID=my-team-project \
  kustomization-release \
  elcicd-charts/elcicd-chart &gt; kustomization.yaml

kustomize build .
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example using el-CICD Chart with a Helm <code>--post-renderer</code> to deploy third-party chart</div>
<div class="content">
<pre>helm upgrade --install -f deployment-def.yaml --post-renderer kustomize.sh my-app elcicd-charts/elcicd-chart</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_cicd_chart_reference">8. el-CICD Chart Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_glossary">8.1. Glossary</h3>

</div>
<div class="sect2">
<h3 id="_keywords">8.2. Keywords</h3>

</div>
<div class="sect2">
<h3 id="_built_in_variables_2">8.3. Built-in Variables</h3>

</div>
<div class="sect2">
<h3 id="_built_in_defaults">8.4. Built-in Defaults</h3>

</div>
<div class="sect2">
<h3 id="_default_template_helper_attributes">8.5. Default Template Helper Attributes</h3>

</div>
<div class="sect2">
<h3 id="_built_in_templates_2">8.6. Built-in Templates</h3>

</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-08-15 18:00:05 UTC
</div>
</div>
</body>
</html>